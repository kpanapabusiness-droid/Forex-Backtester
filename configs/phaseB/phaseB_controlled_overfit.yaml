# Phase B â€” Controlled overfit diagnostic. Fold N fit, Fold N+1 check; at least 3 transitions.
# NOT WFO selection; NOT ranking. Stability proxy: drawdown + trade count sanity + scratch penalty.
# Outputs under results/phaseB/controlled_overfit/<indicator>/.
strategy_version: "forex_backtester_v1.9.7"

pairs:
  - "EUR_USD"
  - "GBP_USD"
  - "USD_JPY"
  - "USD_CHF"
  - "USD_CAD"
  - "AUD_USD"
  - "NZD_USD"
  - "EUR_GBP"
  - "EUR_JPY"
  - "EUR_CHF"
  - "EUR_CAD"
  - "EUR_AUD"
  - "EUR_NZD"
  - "GBP_JPY"
  - "GBP_CHF"
  - "GBP_CAD"
  - "GBP_AUD"
  - "GBP_NZD"
  - "CHF_JPY"
  - "CAD_JPY"
  - "AUD_JPY"
  - "NZD_JPY"
  - "CAD_CHF"
  - "AUD_CHF"
  - "AUD_CAD"
  - "AUD_NZD"
  - "NZD_CHF"
  - "NZD_CAD"

timeframe: "D"

indicators:
  c1: "c1_coral"
  use_c2: false
  use_baseline: false
  use_volume: false
  use_exit: false

rules:
  one_candle_rule: false
  pullback_rule: false
  bridge_too_far_days: 7
  allow_baseline_as_catalyst: false

entry:
  sl_atr: 1.5
  tp1_atr: 1.0
  trail_after_atr: 2.0
  ts_atr: 1.5

exit:
  use_trailing_stop: false
  move_to_breakeven_after_atr: false
  exit_on_c1_reversal: true
  exit_on_baseline_cross: false
  exit_on_exit_signal: false

tracking:
  track_win_loss_scratch: true
  track_roi: true
  track_drawdown: true
  in_sim_equity: true
  verbose_logs: false

spreads:
  enabled: true
  default_pips: 0.5
  per_pair: {}
  mode: "fixed"
  atr_mult: 0.0

risk:
  starting_balance: 10000.0
  risk_per_trade: 0.005

cache:
  enabled: true
  dir: "cache"
  format: "parquet"

validation:
  enabled: true
  fail_fast: true
  strict_contract: false

output:
  results_dir: "results/phaseB/controlled_overfit"

outputs:
  dir: "results/phaseB/controlled_overfit"

date_range:
  start: "2019-01-01"
  end: "2026-01-01"

phaseB:
  run_name: "controlled_overfit"
  mode: "controlled_overfit"
  diagnostic_fold_pairs:
    - fit_window:
        start: "2019-01-01"
        end: "2021-12-31"
      check_window:
        start: "2022-01-01"
        end: "2023-06-30"
    - fit_window:
        start: "2020-01-01"
        end: "2022-06-30"
      check_window:
        start: "2022-07-01"
        end: "2023-12-31"
    - fit_window:
        start: "2021-01-01"
        end: "2023-06-30"
      check_window:
        start: "2023-07-01"
        end: "2024-12-31"
    - fit_window:
        start: "2022-01-01"
        end: "2024-06-30"
      check_window:
        start: "2024-07-01"
        end: "2025-12-31"
